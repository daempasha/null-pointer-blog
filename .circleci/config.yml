version: 2.1
jobs:
 pull:
  docker:
    - image: circleci/node:10.16.3
  steps:
    - checkout
    
 build:
   working_directory: ~/frontend
   docker:
     - image: circleci/node:10.16.3
   steps:
     - run:
         name: Update NPM
         command: "sudo npm install"
     - run:
        name: Show directory
        command: ls
     - restore_cache:
         key: dependency-cache-{{ checksum "package-lock.json" }}
     - run:
         name: Install Dependencies
         command: npm install
     - save_cache:
         key: dependency-cache-{{ checksum "package-lock.json" }}
         paths:
           - ~/node_modules
     - run:
         name: Run tests
         command: npm run test